<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidsWear Hub - Curated Children's Clothing</title>
    <meta name="description" content="Curated collections of beautiful children's clothing delivered to your doorstep">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8f2ff 50%, #f0e8ff 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .page {
            display: none;
            min-height: 100vh;
            padding: 20px 0;
        }

        .page.active {
            display: block;
        }

        .gradient-text {
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 16px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1a1a1a;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #8b5cf6;
            color: #8b5cf6;
        }

        .btn-outline:hover {
            background: #8b5cf6;
            color: white;
        }

        .btn-selection {
            background: linear-gradient(135deg, #06b6d4, #0ea5e9);
            color: white;
            width: 100%;
            padding: 16px;
            font-size: 18px;
        }

        .banner-card {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .banner-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .banner-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
        }

        .banner-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
            padding: 40px 30px 30px;
        }

        .selection-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px;
        }

        .selection-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .selection-card.selected {
            border: 3px solid #8b5cf6;
            transform: scale(1.05);
        }

        .character-image {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #8b5cf6;
        }

        .age-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
            margin: 20px 0;
        }

        .age-slider::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #8b5cf6;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        .age-display {
            text-align: center;
            font-size: 48px;
            font-weight: bold;
            color: #8b5cf6;
            margin: 30px 0;
        }

        .collection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .collection-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .collection-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }

        .collection-card.selected {
            border: 2px solid #8b5cf6;
            background: rgba(139, 92, 246, 0.05);
        }

        .collection-icon {
            font-size: 48px;
            margin-bottom: 16px;
            text-align: center;
        }

        .collection-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #1f2937;
        }

        .collection-description {
            color: #6b7280;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .brands {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .brand-tag {
            background: #f3f4f6;
            color: #374151;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 16px;
        }

        .header p {
            font-size: 1.2rem;
            color: #6b7280;
            max-width: 600px;
            margin: 0 auto;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 60px;
        }

        .feature {
            text-align: center;
            padding: 30px 20px;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 24px;
        }

        .calendar {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .time-slots {
            display: grid;
            gap: 12px;
            margin-top: 20px;
        }

        .time-slot {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-slot:hover {
            border-color: #8b5cf6;
        }

        .time-slot.selected {
            border-color: #8b5cf6;
            background: rgba(139, 92, 246, 0.05);
        }

        .summary-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(6, 182, 212, 0.05));
            border-radius: 16px;
            padding: 24px;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .selection-card {
                margin: 10px 0;
            }
            
            .character-image {
                width: 150px;
                height: 150px;
                font-size: 60px;
            }
            
            .collection-grid {
                grid-template-columns: 1fr;
            }
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: #ef4444;
        }
    </style>
</head>
<body>
    <!-- Page 0: Landing Page -->
    <div id="page-landing" class="page active">
        <div class="container">
            <div class="header">
                <h1 class="gradient-text">KidsWear Hub</h1>
                <p>Curated collections of beautiful children's clothing delivered to your doorstep</p>
            </div>

            <div class="banners">
                <div class="banner-card" onclick="selectBanner('infant')">
                    <div class="banner-image">👶</div>
                    <div class="banner-content">
                        <h2 style="font-size: 2rem; margin-bottom: 8px;">Shop for Your Infant</h2>
                        <p style="font-size: 1.1rem; margin-bottom: 8px; opacity: 0.9;">From the comfort of your house</p>
                        <p style="font-size: 0.9rem; opacity: 0.8;">Discover our curated collection of soft, comfortable, and adorable clothing for your little one</p>
                    </div>
                </div>

                <div class="banner-card" onclick="selectBanner('monsoon')">
                    <div class="banner-image">🌧️</div>
                    <div class="banner-content">
                        <h2 style="font-size: 2rem; margin-bottom: 8px;">Get Monsoon Ready</h2>
                        <p style="font-size: 1.1rem; margin-bottom: 8px; opacity: 0.9;">Raincoats & warmer clothes brought home</p>
                        <p style="font-size: 0.9rem; opacity: 0.8;">Stay dry and cozy with our collection of raincoats, jackets, and warm clothing</p>
                    </div>
                </div>

                <div class="banner-card" onclick="selectBanner('growing')">
                    <div class="banner-image">✨</div>
                    <div class="banner-content">
                        <h2 style="font-size: 2rem; margin-bottom: 8px;">Don't We Love Kids Growing Up!</h2>
                        <p style="font-size: 1.1rem; margin-bottom: 8px; opacity: 0.9;">Replenish their wardrobe with latest styles</p>
                        <p style="font-size: 0.9rem; opacity: 0.8;">Trendy, comfortable, and stylish clothing that grows with your child</p>
                    </div>
                </div>
            </div>

            <div class="features">
                <div class="feature">
                    <div class="feature-icon">🏠</div>
                    <h3 style="margin-bottom: 12px;">Home Delivery</h3>
                    <p style="color: #6b7280;">Try before you buy in the comfort of your home</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">✨</div>
                    <h3 style="margin-bottom: 12px;">Curated Collections</h3>
                    <p style="color: #6b7280;">Handpicked styles from top brands for your little ones</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">💝</div>
                    <h3 style="margin-bottom: 12px;">Easy Returns</h3>
                    <p style="color: #6b7280;">Hassle-free returns for items that don't fit perfectly</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 1: Gender Selection -->
    <div id="page-gender" class="page">
        <div class="container">
            <div class="header">
                <h1 class="gradient-text">Are you looking for clothes for a boy or girl?</h1>
                <p>Choose to see our curated collections</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; max-width: 600px; margin: 0 auto;">
                <div class="selection-card" onclick="selectGender('boy')">
                    <div class="character-image">👦</div>
                    <button class="btn btn-selection">Boy</button>
                </div>

                <div class="selection-card" onclick="selectGender('girl')">
                    <div class="character-image">👧</div>
                    <button class="btn btn-selection">Girl</button>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-outline" onclick="goToPage('landing')">← Back to Collections</button>
                <div></div>
            </div>
        </div>
    </div>

    <!-- Page 2: Age Selection -->
    <div id="page-age" class="page">
        <div class="container">
            <div class="header">
                <h1 class="gradient-text">Please tell us the age of your kid</h1>
                <p>This helps us curate the perfect collection for your little one</p>
            </div>

            <div style="max-width: 500px; margin: 0 auto;">
                <div class="age-display" id="age-display">3 years</div>
                
                <input type="range" id="age-slider" class="age-slider" min="0" max="12" value="3" oninput="updateAge(this.value)">
                
                <div style="display: flex; justify-content: space-between; color: #6b7280; font-size: 14px;">
                    <span>0-12 months</span>
                    <span>12+ years</span>
                </div>

                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 30px 0;">
                    <button class="btn btn-outline" onclick="setAge(0)">0-12m</button>
                    <button class="btn btn-outline" onclick="setAge(1)">1 year</button>
                    <button class="btn btn-outline" onclick="setAge(2)">2 years</button>
                    <button class="btn btn-outline" onclick="setAge(3)">3 years</button>
                    <button class="btn btn-outline" onclick="setAge(4)">4 years</button>
                    <button class="btn btn-outline" onclick="setAge(5)">5 years</button>
                    <button class="btn btn-outline" onclick="setAge(6)">6 years</button>
                    <button class="btn btn-outline" onclick="setAge(7)">7 years</button>
                    <button class="btn btn-outline" onclick="setAge(8)">8 years</button>
                    <button class="btn btn-outline" onclick="setAge(9)">9 years</button>
                    <button class="btn btn-outline" onclick="setAge(10)">10 years</button>
                    <button class="btn btn-outline" onclick="setAge(12)">12+ years</button>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-outline" onclick="goToPage('gender')">← Back</button>
                <button class="btn btn-primary" onclick="goToPage('collections')" style="padding: 12px 48px;">Next</button>
            </div>
        </div>
    </div>

    <!-- Page 3: Collection Selection -->
    <div id="page-collections" class="page">
        <div class="container">
            <div class="header">
                <h1 class="gradient-text">Customize what we bring</h1>
                <p>Select which collections we should include to help us get you the right things</p>
            </div>

            <div class="collection-grid">
                <div class="collection-card" onclick="toggleCollection('everyday')">
                    <div class="collection-icon">👕</div>
                    <div class="collection-title">Everyday Essentials</div>
                    <div class="collection-description">We will bring you comfortable basics ensuring we give you enough options for daily wear, playtime, and casual outings.</div>
                    <div class="brands">
                        <span class="brand-tag">Carter's</span>
                        <span class="brand-tag">H&M Kids</span>
                        <span class="brand-tag">Zara Kids</span>
                    </div>
                </div>

                <div class="collection-card" onclick="toggleCollection('special')">
                    <div class="collection-icon">🎀</div>
                    <div class="collection-title">Special Occasions</div>
                    <div class="collection-description">We will bring you elegant formal wear ensuring we give you enough options for parties, family gatherings, and special events.</div>
                    <div class="brands">
                        <span class="brand-tag">Polo Ralph Lauren</span>
                        <span class="brand-tag">Tommy Hilfiger</span>
                        <span class="brand-tag">Burberry Kids</span>
                    </div>
                </div>

                <div class="collection-card" onclick="toggleCollection('active')">
                    <div class="collection-icon">🏃</div>
                    <div class="collection-title">Active & Play</div>
                    <div class="collection-description">We will bring you durable activewear ensuring we give you enough options for sports, playground fun, and outdoor adventures.</div>
                    <div class="brands">
                        <span class="brand-tag">Nike Kids</span>
                        <span class="brand-tag">Adidas Kids</span>
                        <span class="brand-tag">Under Armour</span>
                    </div>
                </div>

                <div class="collection-card" onclick="toggleCollection('seasonal')">
                    <div class="collection-icon">🌈</div>
                    <div class="collection-title">Seasonal Must-Haves</div>
                    <div class="collection-description">We will bring you weather-appropriate clothing ensuring we give you enough options for current season needs and upcoming weather changes.</div>
                    <div class="brands">
                        <span class="brand-tag">The North Face</span>
                        <span class="brand-tag">Patagonia Kids</span>
                        <span class="brand-tag">Columbia</span>
                    </div>
                </div>

                <div class="collection-card" onclick="toggleCollection('trendy')">
                    <div class="collection-icon">✨</div>
                    <div class="collection-title">Trendy Fashion</div>
                    <div class="collection-description">We will bring you latest style pieces ensuring we give you enough options for fashion-forward looks and current trends.</div>
                    <div class="brands">
                        <span class="brand-tag">Stella McCartney</span>
                        <span class="brand-tag">Mini Rodini</span>
                        <span class="brand-tag">Bobo Choses</span>
                    </div>
                </div>

                <div class="collection-card" onclick="toggleCollection('comfort')">
                    <div class="collection-icon">🌙</div>
                    <div class="collection-title">Comfort & Sleep</div>
                    <div class="collection-description">We will bring you cozy sleepwear ensuring we give you enough options for bedtime comfort, lounging, and relaxation.</div>
                    <div class="brands">
                        <span class="brand-tag">PJ Salvage Kids</span>
                        <span class="brand-tag">Hatley</span>
                        <span class="brand-tag">Little Sleepies</span>
                    </div>
                </div>
            </div>

            <div id="selected-count" style="text-align: center; margin: 30px 0; display: none;">
                <div style="display: inline-flex; align-items: center; gap: 8px; background: rgba(139, 92, 246, 0.1); color: #8b5cf6; padding: 12px 24px; border-radius: 30px; font-weight: 600;">
                    <span id="count-text">0 collections selected</span>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-outline" onclick="goToPage('age')">← Back</button>
                <button class="btn btn-primary" id="continue-btn" onclick="goToPage('contact')" style="padding: 12px 48px;" disabled>Continue (0)</button>
            </div>
        </div>
    </div>

    <!-- Page 4: Contact Form -->
    <div id="page-contact" class="page">
        <div class="container">
            <div class="header">
                <h1 class="gradient-text">Tell us about yourself</h1>
                <p>We need these details to deliver your curated collection</p>
            </div>

            <div style="max-width: 500px; margin: 0 auto;">
                <div style="background: white; border-radius: 20px; padding: 40px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                    <h2 style="text-align: center; margin-bottom: 30px; color: #1f2937;">Contact Information</h2>
                    
                    <form id="contact-form" onsubmit="submitContactForm(event)">
                        <div class="form-group">
                            <label class="form-label" for="parent-name">Parent/Guardian Name *</label>
                            <input class="form-input" type="text" id="parent-name" placeholder="Enter your full name" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="child-name">Child's Name *</label>
                            <input class="form-input" type="text" id="child-name" placeholder="Enter your child's name" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="phone">Phone Number *</label>
                            <input class="form-input" type="tel" id="phone" placeholder="Enter your phone number" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="address">Delivery Address *</label>
                            <input class="form-input" type="text" id="address" placeholder="Enter your complete address" required>
                        </div>

                        <div class="summary-card">
                            <h3 style="margin-bottom: 12px;">Your Selection Summary:</h3>
                            <div id="selection-summary" style="font-size: 14px; color: #6b7280; line-height: 1.6;"></div>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px; padding: 16px;">
                            Continue to Scheduling
                        </button>
                    </form>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-outline" onclick="goToPage('collections')">← Back to Collections</button>
                <div></div>
            </div>
        </div>
    </div>

    <!-- Page 5: Scheduling -->
    <div id="page-scheduling" class="page">
        <div class="container">
            <div class="header">
                <h1 class="gradient-text">When should we come?</h1>
                <p>Choose a convenient date and time for us to bring your curated collection</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 800px; margin: 0 auto;">
                <div class="calendar">
                    <h3 style="margin-bottom: 20px; color: #1f2937;">Select a Date</h3>
                    <div id="calendar-grid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; text-align: center;">
                        <!-- Calendar will be generated by JavaScript -->
                    </div>
                </div>

                <div class="calendar">
                    <h3 style="margin-bottom: 20px; color: #1f2937;">Select Time Slot</h3>
                    <div id="selected-date-display" style="margin-bottom: 16px; color: #6b7280; font-size: 14px;">Please select a date first</div>
                    <div class="time-slots">
                        <div class="time-slot" onclick="selectTimeSlot('morning')">
                            <div style="font-weight: 600;">Morning (9:00 AM - 12:00 PM)</div>
                            <div style="font-size: 12px; color: #10b981;">Available</div>
                        </div>
                        <div class="time-slot" onclick="selectTimeSlot('afternoon')">
                            <div style="font-weight: 600;">Afternoon (2:00 PM - 5:00 PM)</div>
                            <div style="font-size: 12px; color: #10b981;">Available</div>
                        </div>
                        <div class="time-slot" onclick="selectTimeSlot('evening')">
                            <div style="font-weight: 600;">Evening (6:00 PM - 8:00 PM)</div>
                            <div style="font-size: 12px; color: #10b981;">Available</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="booking-summary" class="summary-card" style="max-width: 800px; margin: 40px auto; display: none;">
                <h3 style="text-align: center; margin-bottom: 20px;">Booking Summary</h3>
                <div id="final-summary" style="font-size: 14px; line-height: 1.6;"></div>
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; color: #6b7280; font-size: 14px;">
                    Our stylist will bring a curated selection based on your preferences. You only pay for what you keep!
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-outline" onclick="goToPage('contact')">← Back to Contact Info</button>
                <button class="btn btn-primary" id="confirm-btn" onclick="confirmBooking()" style="padding: 12px 48px;" disabled>Confirm Booking</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // Global state
        let appState = {
            category: '',
            gender: '',
            age: 3,
            selectedCollections: [],
            contactInfo: {},
            selectedDate: null,
            selectedTimeSlot: ''
        };

        // Utility functions
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            setTimeout(() => {
                toast.className = 'toast';
            }, 3000);
        }

        function goToPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.add('active');
        }

        // Landing page functions
        function selectBanner(category) {
            appState.category = category;
            const categoryData = {
                infant: { ageRange: '0-12 months' },
                monsoon: { season: 'rainy' },
                growing: { style: 'latest' }
            };
            appState = { ...appState, ...categoryData[category] };
            goToPage('gender');
        }

        // Gender selection
        function selectGender(gender) {
            appState.gender = gender;
            goToPage('age');
        }

        // Age selection
        function updateAge(value) {
            appState.age = parseInt(value);
            const ageText = value < 1 ? '0-12 months' : value == 1 ? '1 year' : `${value} years`;
            document.getElementById('age-display').textContent = ageText;
        }

        function setAge(age) {
            document.getElementById('age-slider').value = age;
            updateAge(age);
        }

        // Collection selection
        function toggleCollection(collectionId) {
            const card = event.currentTarget;
            const index = appState.selectedCollections.indexOf(collectionId);
            
            if (index > -1) {
                appState.selectedCollections.splice(index, 1);
                card.classList.remove('selected');
            } else {
                appState.selectedCollections.push(collectionId);
                card.classList.add('selected');
            }
            
            updateCollectionCount();
        }

        function updateCollectionCount() {
            const count = appState.selectedCollections.length;
            const countElement = document.getElementById('selected-count');
            const countText = document.getElementById('count-text');
            const continueBtn = document.getElementById('continue-btn');
            
            if (count > 0) {
                countElement.style.display = 'block';
                countText.textContent = `${count} collection${count !== 1 ? 's' : ''} selected`;
                continueBtn.disabled = false;
                continueBtn.textContent = `Continue (${count})`;
            } else {
                countElement.style.display = 'none';
                continueBtn.disabled = true;
                continueBtn.textContent = 'Continue (0)';
            }
        }

        // Contact form
        function submitContactForm(event) {
            event.preventDefault();
            
            appState.contactInfo = {
                parentName: document.getElementById('parent-name').value,
                childName: document.getElementById('child-name').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value
            };
            
            updateSelectionSummary();
            goToPage('scheduling');
            generateCalendar();
        }

        function updateSelectionSummary() {
            const summary = document.getElementById('selection-summary');
            const categoryText = appState.category ? `Category: ${appState.category.charAt(0).toUpperCase() + appState.category.slice(1)}` : '';
            const genderText = appState.gender ? `Gender: ${appState.gender.charAt(0).toUpperCase() + appState.gender.slice(1)}` : '';
            const ageText = appState.age < 1 ? 'Age: 0-12 months' : `Age: ${appState.age} year${appState.age !== 1 ? 's' : ''}`;
            const collectionsText = `Collections: ${appState.selectedCollections.length} selected`;
            
            summary.innerHTML = `
                ${categoryText ? `<p>${categoryText}</p>` : ''}
                ${genderText ? `<p>${genderText}</p>` : ''}
                <p>${ageText}</p>
                <p>${collectionsText}</p>
            `;
        }

        // Scheduling
        function generateCalendar() {
            const calendar = document.getElementById('calendar-grid');
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            
            // Days of week header
            const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            calendar.innerHTML = daysOfWeek.map(day => 
                `<div style="font-weight: 600; color: #6b7280; padding: 8px;">${day}</div>`
            ).join('');
            
            // Generate calendar days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                calendar.innerHTML += '<div></div>';
            }
            
            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(currentYear, currentMonth, day);
                const isToday = day === today.getDate();
                const isPast = date < today;
                const dateStr = date.toISOString().split('T')[0];
                
                calendar.innerHTML += `
                    <div onclick="selectDate('${dateStr}')" 
                         style="padding: 8px; cursor: ${isPast ? 'not-allowed' : 'pointer'}; 
                                border-radius: 8px; color: ${isPast ? '#d1d5db' : '#374151'};
                                ${isToday ? 'background: rgba(139, 92, 246, 0.1); color: #8b5cf6;' : ''}
                                ${!isPast ? 'hover:background: rgba(139, 92, 246, 0.1);' : ''}"
                         class="calendar-day">
                        ${day}
                    </div>
                `;
            }
        }

        function selectDate(dateStr) {
            const date = new Date(dateStr);
            const today = new Date();
            
            if (date <= today) return;
            
            appState.selectedDate = dateStr;
            
            // Update visual selection
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.style.background = '';
                day.style.color = '#374151';
            });
            event.target.style.background = '#8b5cf6';
            event.target.style.color = 'white';
            
            // Update date display
            const formattedDate = date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('selected-date-display').textContent = `Available slots for ${formattedDate}`;
            
            updateBookingSummary();
        }

        function selectTimeSlot(slot) {
            if (!appState.selectedDate) {
                showToast('Please select a date first', 'error');
                return;
            }
            
            appState.selectedTimeSlot = slot;
            
            // Update visual selection
            document.querySelectorAll('.time-slot').forEach(timeSlot => {
                timeSlot.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            updateBookingSummary();
        }

        function updateBookingSummary() {
            if (!appState.selectedDate || !appState.selectedTimeSlot) {
                document.getElementById('booking-summary').style.display = 'none';
                document.getElementById('confirm-btn').disabled = true;
                return;
            }
            
            const timeSlotNames = {
                morning: 'Morning (9:00 AM - 12:00 PM)',
                afternoon: 'Afternoon (2:00 PM - 5:00 PM)',
                evening: 'Evening (6:00 PM - 8:00 PM)'
            };
            
            const selectedDate = new Date(appState.selectedDate);
            const formattedDate = selectedDate.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            document.getElementById('final-summary').innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <p style="font-weight: 600; margin-bottom: 8px;">Customer Details:</p>
                        <p>Parent: ${appState.contactInfo.parentName}</p>
                        <p>Child: ${appState.contactInfo.childName}</p>
                        <p>Phone: ${appState.contactInfo.phone}</p>
                    </div>
                    <div>
                        <p style="font-weight: 600; margin-bottom: 8px;">Visit Details:</p>
                        <p>Date: ${formattedDate}</p>
                        <p>Time: ${timeSlotNames[appState.selectedTimeSlot]}</p>
                        <p>Collections: ${appState.selectedCollections.length} selected</p>
                    </div>
                </div>
            `;
            
            document.getElementById('booking-summary').style.display = 'block';
            document.getElementById('confirm-btn').disabled = false;
        }

        function confirmBooking() {
            const selectedDate = new Date(appState.selectedDate);
            const formattedDate = selectedDate.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            const timeSlotNames = {
                morning: 'Morning (9:00 AM - 12:00 PM)',
                afternoon: 'Afternoon (2:00 PM - 5:00 PM)',
                evening: 'Evening (6:00 PM - 8:00 PM)'
            };
            
            showToast(`Visit Scheduled Successfully! 🎉 We'll visit you on ${formattedDate} during ${timeSlotNames[appState.selectedTimeSlot]}`, 'success');
            
            console.log('Final booking data:', appState);
            
            setTimeout(() => {
                goToPage('landing');
                // Reset state
                appState = {
                    category: '',
                    gender: '',
                    age: 3,
                    selectedCollections: [],
                    contactInfo: {},
                    selectedDate: null,
                    selectedTimeSlot: ''
                };
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateAge(3);
        });
    </script>
</body>
</html>